
# What json files are there to process in our pipeline?
INPUTS=[name.replace('.json', '') for name in os.listdir("data/") if name.endswith('json')]

rule all:
  input:
    # The to be processed input files
    expand("results/{complex}/data/input.json",
        complex=INPUTS)

def getInputNames(wildcards):
  """

  See: https://stackoverflow.com/a/56934990
  """
  inputs = list()
  for s in os.listdir("data/"+wildcards.sample):
      input.append(os.path.join("data/",wildcards.sample,s))
  print(f"found input files {input}")
  return inputs


## preprocess:      Preprocess the input JSON files.
rule preprocess:
  """When the sequences are too long to predict, cut them

  Note not yet implemented yet
  """
  input:
    "data/{complex}.json"
  output:
    "results/{complex}/data/input.json"
  shell:
    """
    cp {input} {output}
    """

## help:            Show the help.
rule help:
    input: "workflow/Snakefile"
    shell:
        "sed -n 's/^##//p' {input}"

## clean:           Clean all outputs
rule clean:
    shell:
        "rm -rf results/*"
